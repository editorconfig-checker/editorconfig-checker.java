buildscript {
    repositories {
        mavenCentral()
        // The next repo is only needed while using SNAPSHOT versions
        maven { url "https://oss.sonatype.org/content/repositories/snapshots" }
    }
    dependencies {
        classpath "net.saliman:gradle-cobertura-plugin:2.4.0"
    }
}

plugins {
    id 'net.saliman.cobertura' version '2.4.0'
    id "info.solidsoft.pitest" version '1.1.11'
    id 'com.github.kt3k.coveralls' version '2.8.1'
}

pitest {
    timestampedReports = false
    outputFormats = ['XML']
}

cobertura.coverageFormats = ['html', 'xml'] // coveralls plugin depends on xml format report

group 'org.editorconfig'
version '1.0-SNAPSHOT'

apply plugin: 'java'

sourceCompatibility = 1.7
version = 0.1

repositories {
    mavenCentral()
}

dependencies {
    testRuntime "org.slf4j:slf4j-log4j12:1.7.24"
    testRuntime "log4j:log4j:1.2.17"
    compile 'org.ini4j:ini4j:0.5.4'
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

jar {
    manifest {
        attributes 'Implementation-Version': version
    }
}

void prepare() {
    File f = new File(".git/hooks/pre-commit")
    if (!f.exists()) {
        println "Linking pre-commit git hook"
        java.nio.file.Files.createSymbolicLink(
            f.toPath(),
            new File("../../Build/GitHooks/pre-commit").toPath()
        )
    }
}
prepare()
